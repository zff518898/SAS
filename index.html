<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAS焦虑自评量表 | 心理健康测试</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #ff8c42;
            --light-color: #f8f9fa;
            --dark-color: #333;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            background-color: #f0f4f8;
            color: var(--dark-color);
            line-height: 1.6;
            padding-bottom: 40px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        .card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 1.8rem;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .intro-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .warning {
            background-color: #fff9e6;
            border-left: 5px solid var(--accent-color);
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .warning h3 {
            color: #d35400;
            margin-bottom: 10px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 14px 30px;
            border-radius: 50px;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn-accent {
            background-color: var(--accent-color);
        }
        
        .btn-accent:hover {
            background-color: #e67e22;
        }
        
        .test-container {
            display: none;
        }
        
        .question {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .question:last-child {
            border-bottom: none;
        }
        
        .question-number {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .option {
            flex: 1 1 calc(50% - 15px);
            min-width: 250px;
        }
        
        .option input {
            display: none;
        }
        
        .option label {
            display: block;
            padding: 18px 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid #e9ecef;
            font-size: 1.05rem;
        }
        
        .option label:hover {
            background-color: #e9ecef;
        }
        
        .option input:checked + label {
            background-color: #e3f2fd;
            border-color: var(--primary-color);
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        .option input:checked + label::before {
            content: "✓ ";
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .result-container {
            display: none;
            text-align: center;
        }
        
        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: conic-gradient(var(--accent-color) 0% var(--percentage), #eee var(--percentage) 100%);
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .score-inner {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: 700;
            color: var(--secondary-color);
        }
        
        .score-label {
            font-size: 1rem;
            color: #777;
        }
        
        .result-level {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .result-description {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto 25px;
            text-align: left;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        
        .recommendations {
            text-align: left;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .recommendations ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .recommendations li {
            margin-bottom: 10px;
            padding-left: 10px;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #777;
            font-size: 0.95rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: right;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .resources {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .resource-card {
            flex: 1 1 300px;
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .resource-card:hover {
            transform: translateY(-5px);
        }
        
        .resource-card i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .option {
                flex: 1 1 100%;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="icon">
                <i class="fas fa-heartbeat"></i>
            </div>
            <h1>SAS焦虑自评量表</h1>
            <p class="subtitle">SAS（Self-Rating Anxiety Scale）是国际上广泛使用的焦虑症状自评工具，包含20个问题，帮助您了解近一周内的焦虑状况。</p>
        </header>
        
        <section id="intro" class="card">
            <h2>关于SAS焦虑自评量表</h2>
            <div class="intro-text">
                <p>SAS焦虑自评量表（Self-Rating Anxiety Scale）由Zung于1971年编制，用于评估焦虑症状的轻重程度及其在治疗中的变化。</p>
                <p>本量表包含20个问题，反映了焦虑状态的四组特异性症状：1.精神性-情感症状；2.躯体性障碍；3.精神运动性障碍；4.心理障碍。</p>
                
                <div class="warning">
                    <h3><i class="fas fa-exclamation-triangle"></i> 重要提示</h3>
                    <p>本测试仅为自我评估工具，不能替代专业医疗诊断。如果您感到持续的焦虑或情绪困扰，请务必咨询心理健康专业人士。测试结果仅供参考，不应作为治疗依据。</p>
                </div>
                
                <p><strong>指导语：</strong>请仔细阅读下面20个问题，根据您最近一周的实际感觉进行选择。每个问题有4个选项，分别表示：<br>
                1. 没有或很少时间<br>
                2. 少部分时间<br>
                3. 相当多时间<br>
                4. 绝大部分或全部时间</p>
            </div>
            
            <button id="start-btn" class="btn btn-accent">开始测试</button>
        </section>
        
        <section id="test" class="test-container card">
            <div class="progress-text">问题 <span id="current-question">1</span> / <span id="total-questions">20</span></div>
            <div class="progress-bar">
                <div class="progress" id="test-progress"></div>
            </div>
            
            <div id="questions-container">
                <!-- 问题将通过JavaScript动态生成 -->
            </div>
            
            <div class="controls">
                <button id="prev-btn" class="btn">上一题</button>
                <button id="next-btn" class="btn">下一题</button>
                <button id="submit-btn" class="btn btn-accent">提交测试</button>
            </div>
        </section>
        
        <section id="result" class="result-container card">
            <h2>测试结果</h2>
            
            <div class="score-circle" id="score-circle">
                <div class="score-inner">
                    <div class="score-value" id="score-value">0</div>
                    <div class="score-label">原始总分 / 80</div>
                </div>
            </div>
            
            <div class="result-level" id="result-level">结果等级</div>
            <div class="result-description" id="result-description">结果描述将显示在这里</div>
            
            <div class="recommendations">
                <h3>建议与资源</h3>
                <div id="recommendations-content">
                    <!-- 建议内容将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <button id="retake-btn" class="btn" style="margin-top: 30px;">重新测试</button>
        </section>
        
        <section class="card">
            <h2>心理健康资源</h2>
            <div class="resources">
                <div class="resource-card">
                    <i class="fas fa-hands-helping"></i>
                    <h3>寻求专业帮助</h3>
                    <p>如果您感到持续的焦虑或情绪困扰，建议咨询心理医生、心理咨询师或其他心理健康专业人士。</p>
                </div>
                
                <div class="resource-card">
                    <i class="fas fa-book"></i>
                    <h3>心鸟心理咨询服务</h3>
                </div>
                
                <div class="resource-card">
                    <i class="fas fa-users"></i>
                    <h3>支持网络</h3>
                    <p>与信任的家人、朋友分享您的感受，或加入支持小组，与有相似经历的人交流。</p>
                </div>
            </div>
        </section>
        
        <div class="footer">
            <p>© 2023 SAS焦虑自评量表 | 本测试仅用于自我评估和教育目的，不能替代专业医疗建议</p>
            <p>如果你或你认识的人正处于危机中，请立即联系当地的心理健康热线或紧急服务</p>
        </div>
    </div>

    <script>
        // SAS焦虑测试问题数据
        const testQuestions = [
            {
                text: "我觉得比平时容易紧张和着急",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我无缘无故地感到害怕",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我容易心里烦乱或觉得惊恐",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我觉得我可能将要发疯",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我觉得一切都很好，也不会发生什么不幸",
                options: [
                    { text: "没有或很少时间", score: 4 },
                    { text: "少部分时间", score: 3 },
                    { text: "相当多时间", score: 2 },
                    { text: "绝大部分或全部时间", score: 1 }
                ]
            },
            {
                text: "我手脚发抖打颤",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我因为头痛、颈痛和背痛而苦恼",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我感觉容易衰弱和疲乏",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我觉得心平气和，并且容易安静坐着",
                options: [
                    { text: "没有或很少时间", score: 4 },
                    { text: "少部分时间", score: 3 },
                    { text: "相当多时间", score: 2 },
                    { text: "绝大部分或全部时间", score: 1 }
                ]
            },
            {
                text: "我觉得心跳很快",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我因为一阵阵头晕而苦恼",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我有晕倒发作或觉得要晕倒似的",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我呼气吸气都感到很容易",
                options: [
                    { text: "没有或很少时间", score: 4 },
                    { text: "少部分时间", score: 3 },
                    { text: "相当多时间", score: 2 },
                    { text: "绝大部分或全部时间", score: 1 }
                ]
            },
            {
                text: "我手脚麻木和刺痛",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我因为胃痛和消化不良而苦恼",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我常常要小便",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我的手常常是干燥温暖的",
                options: [
                    { text: "没有或很少时间", score: 4 },
                    { text: "少部分时间", score: 3 },
                    { text: "相当多时间", score: 2 },
                    { text: "绝大部分或全部时间", score: 1 }
                ]
            },
            {
                text: "我脸红发热",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            },
            {
                text: "我容易入睡并且一夜睡得很好",
                options: [
                    { text: "没有或很少时间", score: 4 },
                    { text: "少部分时间", score: 3 },
                    { text: "相当多时间", score: 2 },
                    { text: "绝大部分或全部时间", score: 1 }
                ]
            },
            {
                text: "我做恶梦",
                options: [
                    { text: "没有或很少时间", score: 1 },
                    { text: "少部分时间", score: 2 },
                    { text: "相当多时间", score: 3 },
                    { text: "绝大部分或全部时间", score: 4 }
                ]
            }
        ];

        // SAS测试结果分析
        // 原始总分（20-80分）乘以1.25取整数得到标准分
        const resultLevels = [
            {
                minStandardScore: 0,
                maxStandardScore: 49,
                level: "正常范围",
                description: "根据您的回答，您的焦虑水平在正常范围内。您可能偶尔会感到焦虑，但这是生活中的正常现象，通常不会对您的日常生活造成明显影响。",
                recommendations: [
                    "继续保持健康的生活习惯，包括规律作息和均衡饮食",
                    "学习一些简单的放松技巧，如深呼吸、冥想",
                    "保持适度的体育锻炼",
                    "与家人朋友保持良好的社交联系"
                ]
            },
            {
                minStandardScore: 50,
                maxStandardScore: 59,
                level: "轻度焦虑",
                description: "根据您的回答，您可能处于轻度焦虑状态。您可能经常感到紧张或不安，但通常还能维持正常的生活功能。建议您关注自己的情绪状态，采取适当措施进行调节。",
                recommendations: [
                    "学习压力管理技巧，如时间管理和放松训练",
                    "考虑与心理咨询师交谈，了解焦虑管理方法",
                    "练习正念冥想，提高自我觉察能力",
                    "减少咖啡因和酒精摄入"
                ]
            },
            {
                minStandardScore: 60,
                maxStandardScore: 69,
                level: "中度焦虑",
                description: "根据您的回答，您可能处于中度焦虑状态。焦虑可能已经开始影响您的日常生活和功能。建议您积极采取措施，必要时寻求专业帮助。",
                recommendations: [
                    "强烈建议咨询心理医生或心理咨询师",
                    "考虑进行认知行为疗法等专业心理治疗",
                    "学习应对焦虑的具体技巧和策略",
                    "建立规律的运动习惯，帮助缓解焦虑"
                ]
            },
            {
                minStandardScore: 70,
                maxStandardScore: 100,
                level: "重度焦虑",
                description: "根据您的回答，您可能处于重度焦虑状态。焦虑可能已经严重影响您的日常生活和功能。强烈建议您尽快寻求专业心理健康支持。",
                recommendations: [
                    "立即咨询心理医生或精神科医生",
                    "考虑综合治疗方案，可能包括心理治疗和药物治疗",
                    "加入焦虑支持小组，获取同伴支持",
                    "学习危机应对策略，建立安全支持网络"
                ]
            }
        ];

        // 全局变量
        let currentQuestion = 0;
        let userAnswers = new Array(testQuestions.length).fill(null);
        let rawTotalScore = 0;
        let standardScore = 0;

        // DOM元素
        const introSection = document.getElementById('intro');
        const testSection = document.getElementById('test');
        const resultSection = document.getElementById('result');
        const startBtn = document.getElementById('start-btn');
        const questionsContainer = document.getElementById('questions-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const retakeBtn = document.getElementById('retake-btn');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const testProgress = document.getElementById('test-progress');
        const scoreValue = document.getElementById('score-value');
        const scoreCircle = document.getElementById('score-circle');
        const resultLevel = document.getElementById('result-level');
        const resultDescription = document.getElementById('result-description');
        const recommendationsContent = document.getElementById('recommendations-content');

        // 初始化
        function init() {
            totalQuestionsEl.textContent = testQuestions.length;
            updateProgressBar();
            
            // 事件监听器
            startBtn.addEventListener('click', startTest);
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            submitBtn.addEventListener('click', submitTest);
            retakeBtn.addEventListener('click', retakeTest);
            
            // 初始显示介绍部分
            introSection.style.display = 'block';
            testSection.style.display = 'none';
            resultSection.style.display = 'none';
        }

        // 开始测试
        function startTest() {
            introSection.style.display = 'none';
            testSection.style.display = 'block';
            resultSection.style.display = 'none';
            
            currentQuestion = 0;
            userAnswers.fill(null);
            renderQuestion();
            updateButtons();
        }

        // 渲染当前问题
        function renderQuestion() {
            questionsContainer.innerHTML = '';
            currentQuestionEl.textContent = currentQuestion + 1;
            updateProgressBar();
            
            const question = testQuestions[currentQuestion];
            const questionElement = document.createElement('div');
            questionElement.className = 'question';
            
            let optionsHTML = '';
            question.options.forEach((option, index) => {
                const isChecked = userAnswers[currentQuestion] === index ? 'checked' : '';
                optionsHTML += `
                    <div class="option">
                        <input type="radio" id="q${currentQuestion}_opt${index}" name="question${currentQuestion}" value="${index}" ${isChecked}>
                        <label for="q${currentQuestion}_opt${index}">${option.text}</label>
                    </div>
                `;
            });
            
            questionElement.innerHTML = `
                <div class="question-text">
                    <span class="question-number">${currentQuestion + 1}</span>
                    ${question.text}
                </div>
                <div class="options">
                    ${optionsHTML}
                </div>
            `;
            
            questionsContainer.appendChild(questionElement);
            
            // 为选项添加事件监听器
            document.querySelectorAll('.option input').forEach(input => {
                input.addEventListener('change', function() {
                    userAnswers[currentQuestion] = parseInt(this.value);
                    updateButtons();
                });
            });
        }

        // 更新进度条
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / testQuestions.length) * 100;
            testProgress.style.width = `${progress}%`;
        }

        // 更新按钮状态
        function updateButtons() {
            prevBtn.disabled = currentQuestion === 0;
            
            // 检查是否已回答当前问题
            const isAnswered = userAnswers[currentQuestion] !== null;
            
            // 如果是最后一题，显示提交按钮，否则显示下一题按钮
            if (currentQuestion === testQuestions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
                submitBtn.disabled = !isAnswered;
            } else {
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
                nextBtn.disabled = !isAnswered;
            }
        }

        // 显示上一题
        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuestion();
                updateButtons();
            }
        }

        // 显示下一题
        function showNextQuestion() {
            if (currentQuestion < testQuestions.length - 1 && userAnswers[currentQuestion] !== null) {
                currentQuestion++;
                renderQuestion();
                updateButtons();
            }
        }

        // 提交测试
        function submitTest() {
            // 检查是否所有问题都已回答
            const unansweredQuestions = userAnswers.filter(answer => answer === null).length;
            if (unansweredQuestions > 0) {
                alert(`您还有 ${unansweredQuestions} 个问题未回答，请先回答所有问题再提交。`);
                return;
            }
            
            // 计算原始总分
            rawTotalScore = 0;
            for (let i = 0; i < testQuestions.length; i++) {
                if (userAnswers[i] !== null) {
                    const selectedOption = testQuestions[i].options[userAnswers[i]];
                    rawTotalScore += selectedOption.score;
                }
            }
            
            // 计算标准分（原始总分 × 1.25，四舍五入取整数）
            standardScore = Math.round(rawTotalScore * 1.25);
            
            // 隐藏测试部分，显示结果部分
            testSection.style.display = 'none';
            resultSection.style.display = 'block';
            
            // 更新结果
            scoreValue.textContent = rawTotalScore;
            
            // 计算百分比用于进度圆环（基于原始总分，最高80分）
            const percentage = Math.min((rawTotalScore / 80) * 100, 100);
            scoreCircle.style.setProperty('--percentage', `${percentage}%`);
            
            // 确定结果等级
            let result;
            for (const level of resultLevels) {
                if (standardScore >= level.minStandardScore && standardScore <= level.maxStandardScore) {
                    result = level;
                    break;
                }
            }
            
            // 如果没有匹配的结果，使用最高风险级别
            if (!result) {
                result = resultLevels[resultLevels.length - 1];
            }
            
            // 更新结果文本
            resultLevel.textContent = result.level;
            resultDescription.innerHTML = `
                <p>${result.description}</p>
                <p style="margin-top: 15px;"><strong>原始总分：</strong>${rawTotalScore}分（范围20-80分）</p>
                <p><strong>标准分：</strong>${standardScore}分（原始总分×1.25）</p>
                <p><strong>评估标准：</strong>标准分＜50分为正常范围，50-59分为轻度焦虑，60-69分为中度焦虑，≥70分为重度焦虑</p>
            `;
            
            // 更新建议
            let recommendationsHTML = '<ul>';
            result.recommendations.forEach(rec => {
                recommendationsHTML += `<li>${rec}</li>`;
            });
            recommendationsHTML += '</ul>';
            recommendationsContent.innerHTML = recommendationsHTML;
        }

        // 重新测试
        function retakeTest() {
            // 重置答案和分数
            userAnswers.fill(null);
            rawTotalScore = 0;
            standardScore = 0;
            
            // 显示测试部分，隐藏结果部分
            resultSection.style.display = 'none';
            testSection.style.display = 'block';
            
            // 重置到第一题
            currentQuestion = 0;
            renderQuestion();
            updateButtons();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>